import{_ as w}from"./AuthenticatedLayout-BeAxI95q.js";import{f as r,o as a,a as l,u as f,g as h,w as v,b as t,h as d,n as c,F as m,k,t as i,e as p,Q as u}from"./app-BSgs8Lu9.js";const y={class:"max-w-2xl p-4 mx-auto sm:p-6"},_={class:"flex items-center justify-between mb-6"},b={key:0,class:"flex flex-col items-center justify-center p-8 text-center bg-white rounded-lg shadow"},C={key:1,class:"space-y-3"},N=["onClick"],A={class:"flex-1 min-w-0 ml-3"},j={class:"text-sm font-medium text-gray-900"},B={class:"text-sm text-gray-500"},V={class:"flex items-center mt-1 text-xs text-gray-400"},M={key:0,class:"flex-shrink-0 ml-2"},$={__name:"AllNotifications",props:{notifications:Array,unread_count:Number},setup(n){const x=async()=>{try{await axios.post("/notifications/mark-all-read"),u.reload()}catch(o){console.error("Failed to mark all as read:",o)}},g=async o=>{var e;if(!o.read_at)try{await axios.post(`/notifications/${o.id}/read`),o.read_at=new Date,unreadCount.value=Math.max(unreadCount.value-1,0)}catch(s){console.error("Failed to mark as read:",s)}(e=o.data)!=null&&e.color&&u.visit(route("tickets.show",o.data.color))};return(o,e)=>(a(),r(m,null,[l(f(h),{title:"Notifications"}),l(w,null,{default:v(()=>[t("div",y,[t("div",_,[e[0]||(e[0]=t("h1",{class:"text-2xl font-bold text-gray-800"},"Notifications",-1)),n.unread_count>0?(a(),r("button",{key:0,onClick:x,class:c(["px-4 py-2 text-sm font-medium text-white transition-colors bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",{"opacity-50 cursor-not-allowed":n.notifications.length===0}])}," Mark All as Read ",2)):d("",!0)]),n.notifications.length===0?(a(),r("div",b,e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),t("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No notifications yet",-1),t("p",{class:"mt-1 text-sm text-gray-500"},"We'll notify you when something arrives.",-1)]))):(a(),r("div",C,[(a(!0),r(m,null,k(n.notifications,s=>(a(),r("div",{key:s.id,class:c(["p-4 mb-4 transition-all bg-white border rounded-lg shadow-sm hover:shadow-md",{"border-l-4 border-indigo-500":!s.read_at,"opacity-90":s.read_at}])},[t("div",{class:"flex items-start cursor-pointer",onClick:F=>g(s)},[e[4]||(e[4]=t("div",{class:"flex-shrink-0 pt-0.5"},[t("div",{class:"flex items-center justify-center w-8 h-8 text-indigo-600 bg-indigo-100 rounded-full"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",A,[t("p",j,i(s.data.title),1),t("p",B,i(s.data.message||"New notification"),1),t("div",V,[e[2]||(e[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),p(" "+i(s.created_at),1)])]),s.read_at?d("",!0):(a(),r("div",M,e[3]||(e[3]=[t("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"}," New ",-1)])))],8,N)],2))),128))]))])]),_:1})],64))}};export{$ as default};
