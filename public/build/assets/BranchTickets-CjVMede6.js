import{_ as $}from"./AuthenticatedLayout-BeAxI95q.js";import{i as A,f as n,o as l,a as u,u as y,g as D,w as m,b as t,h as N,F as w,k as z,n as a,t as r,e as d,S as V,Q as j}from"./app-BSgs8Lu9.js";import{_ as L}from"./TicketTabs-D8NEmtoy.js";const F={class:"flex items-center justify-between"},H={class:"py-8"},Q={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},E={class:"overflow-hidden bg-white shadow-xl sm:rounded-xl"},G={class:"p-6 sm:p-8"},O={class:"grid grid-cols-1 gap-4 mb-8 md:grid-cols-5"},P=["onClick"],U={class:"mt-1 text-2xl font-bold text-indigo-800"},q={key:0,class:"flex items-center mb-4"},I={class:"text-sm text-gray-600"},J={class:"font-semibold"},K={class:"overflow-hidden bg-white border border-gray-100 rounded-xl"},R={class:"overflow-x-auto"},W={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-100"},Y={class:"px-6 py-4"},Z={class:"flex items-center"},tt={class:"ml-4"},et={class:"text-sm font-semibold text-gray-900"},st={class:"text-xs text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap"},rt={class:"inline-flex px-3 py-1 text-xs font-semibold leading-5 capitalize rounded-full"},it={class:"px-6 py-4 whitespace-nowrap"},nt={class:"py-4 px-6- whitespace-nowrap"},lt={class:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap"},at={class:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap"},dt={class:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap"},ct={class:"flex justify-end space-x-3"},pt={key:0},mt={__name:"BranchTickets",props:{tickets:{type:Array,default:()=>[]},statuses:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},total_tickets:{type:Number,default:0}},setup(i){const f=i,B={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800",urgent:"bg-purple-100 text-purple-800"},M=o=>{const e=(o==null?void 0:o.color)||"gray";return{gray:"bg-gray-100 text-gray-800",blue:"bg-blue-100 text-blue-800",yellow:"bg-yellow-100 text-yellow-800",green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",purple:"bg-purple-100 text-purple-800",indigo:"bg-indigo-100 text-indigo-800"}[e]||"bg-gray-100 text-gray-800"},b=o=>{j.get(route("tickets.branch-tickets"),{status:o},{preserveState:!0,replace:!0})},T=()=>{j.get(route("tickets.branch-tickets"),{},{preserveState:!0,replace:!0})},v=A(()=>{var e;if(!((e=f.filters)!=null&&e.status))return null;const o=f.statuses.find(p=>p.id==f.filters.status);return(o==null?void 0:o.name)||null}),c=o=>{const e=(o==null?void 0:o.color)||"gray";return{border:`border-${e}-200`,bg:`bg-${e}-50`,text:`text-${e}-600`,hover:`hover:border-${e}-400`}};return(o,e)=>(l(),n(w,null,[u(y(D),{title:"My Tickets"}),u($,null,{header:m(()=>[t("div",F,[e[2]||(e[2]=t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," My Support Tickets ",-1)),u(y(V),{href:o.route("tickets.create"),class:"inline-flex items-center px-4 py-2 text-sm font-semibold tracking-widest text-white uppercase transition-all duration-150 ease-in-out border border-transparent rounded-lg shadow-md bg-gradient-to-r from-indigo-600 to-indigo-500 hover:from-indigo-700 hover:to-indigo-600 active:from-indigo-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 hover:shadow-lg"},{default:m(()=>e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule":"evenodd"})],-1),d(" New Ticket ")])),_:1,__:[1]},8,["href"])])]),default:m(()=>{var p,_;return[t("div",H,[t("div",Q,[u(L,{active:"branch-tickets",has_bm_role:!0}),t("div",E,[t("div",G,[t("div",O,[(l(!0),n(w,null,z(i.statuses,s=>{var g,x;return l(),n("div",{key:s.id,onClick:h=>b(s.id),class:a(["p-4 transition-all duration-200 border-2 rounded-lg cursor-pointer",[c(s).border,c(s).bg,{"border-indigo-500 ring-1 ring-indigo-200":((g=i.filters)==null?void 0:g.status)==s.id||!((x=i.filters)!=null&&x.status)&&s.name.toLowerCase()==="open"},c(s).hover]])},[t("div",{class:a(["text-sm font-medium",c(s).text])},r(s.name),3),t("div",{class:a(["mt-1 text-2xl font-bold",c(s).text])},r(s.tickets_count||0),3)],10,P)}),128)),t("div",{onClick:e[0]||(e[0]=s=>b("all")),class:a(["p-4 transition-all duration-200 border-2 rounded-lg cursor-pointer hover:border-indigo-300",["border-indigo-100 bg-indigo-50",{"border-indigo-500 ring-1 ring-indigo-200":((p=i.filters)==null?void 0:p.status)=="all"}]])},[e[3]||(e[3]=t("div",{class:"text-sm font-medium text-indigo-600"},"Total Tickets",-1)),t("div",U,r(i.total_tickets),1)],2)]),(_=i.filters)!=null&&_.status&&v.value?(l(),n("div",q,[t("span",I,[e[4]||(e[4]=d(" Showing tickets with status: ")),t("span",J,r(v.value),1)]),t("button",{onClick:T,class:"ml-2 text-sm text-indigo-600 hover:text-indigo-800"}," (Clear filter) ")])):N("",!0),t("div",K,[t("div",R,[t("table",W,[e[10]||(e[10]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Ticket Details "),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Department "),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Priority "),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Last Updated "),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Creator "),t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",X,[(l(!0),n(w,null,z(i.tickets,s=>{var g,x,h,k,C,S;return l(),n("tr",{key:s.id,class:"transition-colors duration-150 hover:bg-gray-50"},[t("td",Y,[t("div",Z,[e[5]||(e[5]=t("div",{class:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-indigo-700 rounded-lg bg-indigo-50"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",tt,[t("div",et,r(s.title),1),t("div",st," #"+r(s.id)+" â€¢ "+r(new Date(s.created_at).toLocaleDateString()),1)])])]),t("td",ot,[t("span",rt,[d(r(((h=(x=(g=s.support_topic)==null?void 0:g.support_unit)==null?void 0:x.department)==null?void 0:h.name)||"N/A")+" ",1),e[6]||(e[6]=t("br",null,null,-1)),d(" "+r(((C=(k=s.support_topic)==null?void 0:k.support_unit)==null?void 0:C.name)||"N/A")+" ",1),e[7]||(e[7]=t("br",null,null,-1)),d(" "+r(((S=s.support_topic)==null?void 0:S.name)||"N/A"),1)])]),t("td",it,[t("span",{class:a([B[s.priority]||"bg-gray-100 text-gray-800","inline-flex px-3 py-1 text-xs font-semibold leading-5 capitalize rounded-full"])},r(s.priority),3)]),t("td",nt,[t("span",{class:a([M(s.status),"inline-flex px-3 py-1 text-xs font-semibold leading-5 capitalize rounded-full"])},r(s.status.name),3)]),t("td",lt,r(s.formatted_updated_at),1),t("td",at,r(s.creator.name),1),t("td",dt,[t("div",ct,[u(y(V),{href:o.route("tickets.show",s.id),class:"flex items-center text-indigo-600 hover:text-indigo-900 group"},{default:m(()=>e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),d(" View ")])),_:2,__:[8]},1032,["href"])])])])}),128)),i.tickets.length===0?(l(),n("tr",pt,e[9]||(e[9]=[t("td",{colspan:"6",class:"px-6 py-12 text-center"},[t("div",{class:"flex flex-col items-center justify-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),t("h3",{class:"mt-4 text-lg font-medium text-gray-700"},"No tickets found "),t("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new support ticket")])],-1)]))):N("",!0)])])])])])])])])]}),_:1})],64))}};export{mt as default};
