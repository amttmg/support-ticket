import{f as o,o as r,l as m,x as G,i as h,p as Y,B as j,a as u,u as d,g as J,w as S,b as e,n as f,F as b,k as y,t as p,e as w,j as K,C as O}from"./app-BSgs8Lu9.js";import{_ as Q}from"./AuthenticatedLayout-BeAxI95q.js";import{_ as P}from"./InputError-CTq5lT9t.js";import{_,a as X}from"./TextInput-CwW4S_3F.js";import{P as Z}from"./PrimaryButton-B-L9r9Gx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I=["id","rows","value","placeholder","required"],ee={__name:"TextArea",props:{modelValue:String,id:String,rows:{type:[String,Number],default:3},placeholder:{type:String,default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v){return(c,a)=>(r(),o("textarea",{id:v.id,rows:v.rows,value:v.modelValue,onInput:a[0]||(a[0]=i=>c.$emit("update:modelValue",i.target.value)),placeholder:v.placeholder,required:v.required,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,40,I))}},te={class:"py-8"},le={class:"w-full max-w-4xl mx-auto sm:px-6 lg:px-8"},se={class:"overflow-hidden bg-white shadow-sm sm:rounded-xl"},oe={class:"p-8 bg-white border-b border-gray-200"},re={class:"flex items-center justify-center mb-10"},ne={class:"flex items-center"},ie={key:0,class:"space-y-6"},ae={key:0,class:"flex justify-center py-8"},ue={key:1,class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},de=["onClick"],ce={class:"mt-4 text-xl font-semibold text-center text-blue-800"},me={key:1,class:"space-y-6"},pe={class:"flex items-center justify-between"},ve={class:"px-3 py-1 text-sm font-medium text-blue-800 bg-blue-100 rounded-full"},fe={key:0,class:"flex justify-center py-8"},be={key:1,class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},xe=["onClick"],ge={class:"text-xl font-semibold text-center text-blue-800"},he={key:2,class:"space-y-6"},ye={class:"flex items-center justify-between"},we={class:"space-x-2"},_e={class:"px-3 py-1 text-sm font-medium text-blue-800 bg-blue-100 rounded-full"},ke={class:"px-3 py-1 text-sm font-medium text-purple-800 bg-purple-100 rounded-full"},Ce={key:0,class:"flex justify-center py-8"},$e={key:1,class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},Be=["onClick"],Te={class:"text-lg font-semibold text-center text-blue-800"},Ve={key:3,class:"space-y-6"},je={class:"flex items-center justify-between"},Pe={class:"space-x-2"},Ue={class:"px-3 py-1 text-sm font-medium text-blue-800 bg-blue-100 rounded-full"},Le={class:"px-3 py-1 text-sm font-medium text-purple-800 bg-purple-100 rounded-full"},Se={class:"px-3 py-1 text-sm font-medium text-green-800 bg-green-100 rounded-full"},De={class:"space-y-6"},He={class:"mt-1 space-y-2"},Me=["id","value"],Ne=["for"],ze={class:"pt-4"},Ae={key:0},qe={key:1,class:"flex items-center justify-center"},Je={__name:"Create",setup(v){const c=m(null),a=m(null),i=m(null),k=m([]),C=m([]),x=m([]),$=m(!1),B=m(!1),T=m(!1),n=G({title:"",description:"",priority:"medium",support_topic_id:"",attachments:null}),D=l=>{n.attachments=l.target.files},H=[{value:"low",label:"Low",color:"text-green-600"},{value:"medium",label:"Medium",color:"text-yellow-600"},{value:"high",label:"High",color:"text-red-600"}],V=h(()=>{const l=k.value.find(t=>t.id===c.value);return l?l.name:""}),U=h(()=>{const l=C.value.find(t=>t.id===a.value);return l?l.name:""}),M=h(()=>{const l=x.value.find(t=>t.id===i.value);return l?l.name:""});Y(async()=>{try{$.value=!0;const l=await j.get(`${window.APP_URL}/departments`);k.value=l.data}catch(l){console.error("Error fetching departments:",l)}finally{$.value=!1}});const N=async l=>{c.value=l,a.value=null,i.value=null;try{B.value=!0;const t=await j.get(`${window.APP_URL}/departments/${l}/units`);C.value=t.data}catch(t){console.error("Error fetching units:",t)}finally{B.value=!1}},z=async l=>{a.value=l,i.value=null;try{T.value=!0;const t=await j.get(`${window.APP_URL}/units/${l}/topics`);x.value=t.data}catch(t){console.error("Error fetching topics:",t)}finally{T.value=!1}},A=l=>{i.value=l,n.support_topic_id=l},q=()=>{c.value=null,a.value=null,i.value=null},E=()=>{a.value=null,i.value=null},F=()=>{i.value=null},R=()=>{n.department=c.value,n.unit=a.value,n.topic=i.value,console.log(n),n.post(route("tickets.store"),{preserveScroll:!0,onSuccess:()=>{n.reset(),c.value=null,a.value=null,i.value=null}})},L=m(""),W=h(()=>L.value?x.value.filter(l=>l.name.toLowerCase().includes(L.value.toLowerCase())):x.value);return(l,t)=>(r(),o(b,null,[u(d(J),{title:"Create Support Ticket"}),u(Q,null,{default:S(()=>[e("div",te,[e("div",le,[e("div",se,[e("div",oe,[t[21]||(t[21]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-3xl font-bold text-gray-900"}," Create Support Ticket "),e("p",{class:"mt-2 text-gray-600"}," Get help from our support team ")],-1)),e("div",re,[e("div",ne,[e("div",{class:f(`flex items-center justify-center w-10 h-10 rounded-full ${c.value?"bg-blue-100 text-blue-800":"bg-blue-600 text-white"} font-semibold`)}," 1 ",2),t[3]||(t[3]=e("div",{class:"w-16 h-1 mx-2 bg-blue-200"},null,-1)),e("div",{class:f(`flex items-center justify-center w-10 h-10 rounded-full ${c.value&&!a.value?"bg-blue-600 text-white":a.value?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-400"} font-semibold`)}," 2 ",2),t[4]||(t[4]=e("div",{class:"w-16 h-1 mx-2 bg-blue-200"},null,-1)),e("div",{class:f(`flex items-center justify-center w-10 h-10 rounded-full ${a.value&&!i.value?"bg-blue-600 text-white":i.value?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-400"} font-semibold`)}," 3 ",2),t[5]||(t[5]=e("div",{class:"w-16 h-1 mx-2 bg-blue-200"},null,-1)),e("div",{class:f(`flex items-center justify-center w-10 h-10 rounded-full ${i.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-400"} font-semibold`)}," 4 ",2)])]),c.value?a.value?i.value?(r(),o("div",Ve,[e("div",je,[e("button",{onClick:F,class:"flex items-center text-sm font-medium text-blue-600 hover:text-blue-800"},t[17]||(t[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),w(" Back to topics ")])),e("div",Pe,[e("span",Ue,p(V.value),1),e("span",Le,p(U.value),1),e("span",Se,p(M.value),1)])]),t[20]||(t[20]=e("h2",{class:"text-xl font-semibold text-center text-gray-800"}," Tell us more about your issue ",-1)),e("div",De,[e("div",null,[u(_,{for:"title",value:"Title"}),u(X,{modelValue:d(n).title,"onUpdate:modelValue":t[0]||(t[0]=s=>d(n).title=s),id:"title",type:"text",class:"block w-full mt-1",placeholder:"Briefly describe your issue"},null,8,["modelValue"]),u(P,{message:d(n).errors.title,class:"mt-2"},null,8,["message"])]),e("div",null,[u(_,{for:"description",value:"Description"}),u(ee,{modelValue:d(n).description,"onUpdate:modelValue":t[1]||(t[1]=s=>d(n).description=s),id:"description",class:"block w-full mt-1",rows:"5",placeholder:"Please provide detailed information about your issue..."},null,8,["modelValue"]),u(P,{message:d(n).errors.description,class:"mt-2"},null,8,["message"])]),e("div",null,[u(_,{value:"Priority"}),e("div",He,[(r(),o(b,null,y(H,s=>e("div",{key:s.value,class:"flex items-center"},[K(e("input",{"onUpdate:modelValue":t[2]||(t[2]=g=>d(n).priority=g),id:`priority-${s.value}`,value:s.value,type:"radio",class:"w-4 h-4 border-gray-300 focus:ring-blue-500"},null,8,Me),[[O,d(n).priority]]),e("label",{for:`priority-${s.value}`,class:f(`ml-3 block text-sm font-medium ${s.color}`)},p(s.label),11,Ne)])),64))])]),e("div",null,[u(_,{for:"attachments",value:"Attach Files (optional)"}),e("input",{id:"attachments",type:"file",multiple:"",onChange:D,class:"block w-full mt-1 text-sm text-gray-700 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,32),t[18]||(t[18]=e("p",{class:"mt-1 text-xs text-gray-500"}," You can upload multiple files (max 10MB each) ",-1)),u(P,{message:d(n).errors.attachments,class:"mt-2"},null,8,["message"])]),e("div",ze,[u(Z,{onClick:R,disabled:d(n).processing,class:"w-full px-6 py-3 text-base font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:S(()=>[d(n).processing?(r(),o("span",qe,t[19]||(t[19]=[e("svg",{class:"w-5 h-5 mr-2 -ml-1 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),w(" Processing... ")]))):(r(),o("span",Ae,"Submit Ticket"))]),_:1},8,["disabled"])])])])):(r(),o("div",he,[e("div",ye,[e("button",{onClick:E,class:"flex items-center text-sm font-medium text-blue-600 hover:text-blue-800"},t[13]||(t[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),w(" Back to units ")])),e("div",we,[e("span",_e,p(V.value),1),e("span",ke,p(U.value),1)])]),t[16]||(t[16]=e("h2",{class:"text-xl font-semibold text-center text-gray-800"}," What's the specific issue? ",-1)),T.value?(r(),o("div",Ce,t[14]||(t[14]=[e("div",{class:"w-8 h-8 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"},null,-1)]))):(r(),o("div",$e,[(r(!0),o(b,null,y(W.value,s=>(r(),o("div",{key:s.id,onClick:g=>A(s.id),class:"block p-6 transition duration-200 border-2 border-blue-100 shadow-sm cursor-pointer rounded-xl bg-gradient-to-br from-blue-50 to-white hover:border-blue-300 hover:shadow-md"},[e("h3",Te,p(s.name),1),t[15]||(t[15]=e("p",{class:"mt-1 text-xs text-center text-gray-600"}," Click to select this topic ",-1))],8,Be))),128))]))])):(r(),o("div",me,[e("div",pe,[e("button",{onClick:q,class:"flex items-center text-sm font-medium text-blue-600 hover:text-blue-800"},t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),w(" Back to departments ")])),e("span",ve,p(V.value),1)]),t[12]||(t[12]=e("h2",{class:"text-xl font-semibold text-center text-gray-800"}," Which support unit should handle this? ",-1)),B.value?(r(),o("div",fe,t[10]||(t[10]=[e("div",{class:"w-8 h-8 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"},null,-1)]))):(r(),o("div",be,[(r(!0),o(b,null,y(C.value,s=>(r(),o("div",{key:s.id,onClick:g=>z(s.id),class:"block p-8 transition duration-200 border-2 border-blue-100 shadow-sm cursor-pointer rounded-xl bg-gradient-to-br from-blue-50 to-white hover:border-blue-300 hover:shadow-md"},[e("h3",ge,p(s.name),1),t[11]||(t[11]=e("p",{class:"mt-2 text-sm text-center text-gray-600"}," Click to select this unit ",-1))],8,xe))),128))]))])):(r(),o("div",ie,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold text-center text-gray-800"}," Which department can help you? ",-1)),$.value?(r(),o("div",ae,t[6]||(t[6]=[e("div",{class:"w-8 h-8 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"},null,-1)]))):(r(),o("div",ue,[(r(!0),o(b,null,y(k.value,s=>(r(),o("div",{key:s.id,onClick:g=>N(s.id),class:"block p-8 transition duration-200 border-2 border-blue-200 shadow-sm cursor-pointer rounded-xl bg-gradient-to-br from-blue-50 to-white hover:border-blue-300 hover:shadow-md"},[e("h3",ce,p(s.name),1),t[7]||(t[7]=e("p",{class:"mt-2 text-sm text-center text-gray-600"}," Click to select this department ",-1))],8,de))),128))]))]))])])])])]),_:1})],64))}};export{Je as default};
